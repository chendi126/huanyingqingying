# ğŸ­ çš®å½±æˆç½‘ç«™éƒ¨ç½²æ€»ç»“ - æœåŠ¡å™¨ 1.95.41.96

## ğŸŒ éƒ¨ç½²ä¿¡æ¯æ¦‚è§ˆ

### æœåŠ¡å™¨é…ç½®
- **æœåŠ¡å™¨IP**ï¼š`1.95.41.96`
- **åº”ç”¨ç«¯å£**ï¼š`3000`
- **è®¿é—®åœ°å€**ï¼šhttp://1.95.41.96:3000
- **é¡¹ç›®è·¯å¾„**ï¼š`/var/www/huaxianpiying` (æ¨è)

### åº”ç”¨æ¶æ„
- **å‰ç«¯æ¡†æ¶**ï¼šReact 19 + Vite
- **åç«¯æœåŠ¡å™¨**ï¼šExpress.js (Node.js 20+)
- **è¿›ç¨‹ç®¡ç†**ï¼šPM2
- **åå‘ä»£ç†**ï¼šNginx (å¯é€‰)
- **æ„å»ºå·¥å…·**ï¼šVite

## ğŸš€ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤

### ä¸€é”®éƒ¨ç½²è„šæœ¬
```bash
# ä½¿ç”¨å®Œæ•´éƒ¨ç½²è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/chendi126/huanyingqingying/main/deploy-3000.sh | bash

# æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œ
git clone https://github.com/chendi126/huanyingqingying.git
cd huanyingqingying/huapi-website
chmod +x deploy-3000.sh
./deploy-3000.sh
```

### æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤
```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. æ„å»ºé¡¹ç›®
npm run build:server

# 3. å¯åŠ¨æœåŠ¡
pm2 start server.js --name "huaxianpiying" --env "NODE_ENV=production,PORT=3000"

# 4. ä¿å­˜é…ç½®
pm2 save
```

## ğŸ“ é¡¹ç›®æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- `server.js` - ExpressæœåŠ¡å™¨ï¼Œç«¯å£3000
- `ecosystem.config.js` - PM2è¿›ç¨‹ç®¡ç†é…ç½®
- `nginx.conf` - Nginxåå‘ä»£ç†é…ç½®
- `deploy-3000.sh` - ä¸€é”®éƒ¨ç½²è„šæœ¬
- `start-3000.sh` - å¿«é€Ÿå¯åŠ¨è„šæœ¬

### éƒ¨ç½²æ–‡æ¡£
- `DEPLOY_TO_SERVER_PORT_3000.md` - 3000ç«¯å£éƒ¨ç½²æŒ‡å—
- `DEPLOY_TO_1.95.41.96.md` - é’ˆå¯¹æ‚¨æœåŠ¡å™¨çš„è¯¦ç»†éƒ¨ç½²æŒ‡å—
- `DEPLOY_TO_SERVER.md` - é€šç”¨LinuxæœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸŒ è®¿é—®æ–¹å¼

### å½“å‰å¯ç”¨è®¿é—®åœ°å€
1. **æ‚¨çš„æœåŠ¡å™¨**ï¼šhttp://1.95.41.96:3000 â­ **ä¸»è¦è®¿é—®åœ°å€**
2. **æœ¬åœ°æµ‹è¯•**ï¼šhttp://localhost:3000
3. **å±€åŸŸç½‘è®¿é—®**ï¼šhttp://å†…ç½‘IP:3000

### åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼‰
å¦‚æœæ‚¨æœ‰åŸŸåï¼Œå¯ä»¥é…ç½®åŸŸåè§£æåˆ° `1.95.41.96`ï¼Œç„¶åé€šè¿‡åŸŸåè®¿é—®ã€‚

## ğŸ”§ ç®¡ç†ç»´æŠ¤

### å¸¸ç”¨ç®¡ç†å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs huaxianpiying

# é‡å¯æœåŠ¡
pm2 restart huaxianpiying

# åœæ­¢æœåŠ¡
pm2 stop huaxianpiying

# ç›‘æ§èµ„æºä½¿ç”¨
pm2 monit
```

### æ›´æ–°é¡¹ç›®
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°æ„å»º
npm run build:server

# é‡å¯æœåŠ¡
pm2 restart huaxianpiying
```

### å¤‡ä»½å»ºè®®
```bash
# å¤‡ä»½é¡¹ç›®æ–‡ä»¶
tar -czf huaxianpiying-backup-$(date +%Y%m%d-%H%M%S).tar.gz /var/www/huaxianpiying

# å¤‡ä»½PM2é…ç½®
pm2 save
```

## ğŸ›¡ï¸ å®‰å…¨å»ºè®®

### åŸºç¡€å®‰å…¨é…ç½®
1. **é…ç½®é˜²ç«å¢™**ï¼šåªå…è®¸å¿…è¦çš„ç«¯å£ï¼ˆ22, 80, 443, 3000ï¼‰
2. **ä½¿ç”¨érootç”¨æˆ·**ï¼šåˆ›å»ºä¸“ç”¨ç”¨æˆ·è¿è¡Œåº”ç”¨
3. **å®šæœŸæ›´æ–°**ï¼šä¿æŒç³»ç»Ÿå’Œä¾èµ–åŒ…æ›´æ–°
4. **ç›‘æ§æ—¥å¿—**ï¼šå®šæœŸæ£€æŸ¥åº”ç”¨æ—¥å¿—

### è¿›é˜¶å®‰å…¨é…ç½®
1. **é…ç½®SSLè¯ä¹¦**ï¼šä½¿ç”¨Let's Encryptå…è´¹SSL
2. **è®¾ç½® fail2ban**ï¼šé˜²æ­¢æš´åŠ›ç ´è§£
3. **å®šæœŸå¤‡ä»½**ï¼šè®¾ç½®è‡ªåŠ¨å¤‡ä»½è„šæœ¬
4. **ç›‘æ§å‘Šè­¦**ï¼šé…ç½®ç³»ç»Ÿç›‘æ§å‘Šè­¦

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å·²ä¼˜åŒ–çš„é…ç½®
- âœ… PM2é›†ç¾¤æ¨¡å¼ï¼ˆå¤šè¿›ç¨‹ï¼‰
- âœ… é™æ€èµ„æº30å¤©ç¼“å­˜
- âœ… Gzipå‹ç¼©
- âœ… å†…å­˜é™åˆ¶è‡ªåŠ¨é‡å¯ï¼ˆ500MBï¼‰
- âœ… è‡ªåŠ¨æ•…éšœæ¢å¤

### å¯è¿›ä¸€æ­¥ä¼˜åŒ–
1. **CDNåŠ é€Ÿ**ï¼šä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº
2. **æ•°æ®åº“ä¼˜åŒ–**ï¼šå¦‚æœæœ‰æ•°æ®åº“éœ€æ±‚
3. **è´Ÿè½½å‡è¡¡**ï¼šå¤šæœåŠ¡å™¨éƒ¨ç½²
4. **ç¼“å­˜ç­–ç•¥**ï¼šRedisç­‰ç¼“å­˜æ–¹æ¡ˆ

## ğŸ†˜ å¸¸è§é—®é¢˜æ’æŸ¥

### æ— æ³•è®¿é—® http://1.95.41.96:3000
1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**ï¼š`pm2 status`
2. **æ£€æŸ¥ç«¯å£ç›‘å¬**ï¼š`netstat -tulnp | grep 3000`
3. **æ£€æŸ¥é˜²ç«å¢™**ï¼š`ufw status` æˆ– `firewall-cmd --list-all`
4. **æ£€æŸ¥äº‘æœåŠ¡å®‰å…¨ç»„**ï¼šç¡®è®¤3000ç«¯å£å·²å¼€æ”¾

### é¡µé¢æ˜¾ç¤ºç©ºç™½
1. **æ£€æŸ¥æ„å»ºç»“æœ**ï¼š`ls -la dist/`
2. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**ï¼š`pm2 logs huaxianpiying`
3. **æ£€æŸ¥é™æ€æ–‡ä»¶è·¯å¾„**

### æœåŠ¡é¢‘ç¹å´©æºƒ
1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**ï¼š`pm2 logs huaxianpiying --lines 50`
2. **æ£€æŸ¥å†…å­˜ä½¿ç”¨**ï¼š`pm2 monit`
3. **æ£€æŸ¥ç³»ç»Ÿèµ„æº**ï¼š`top` æˆ– `htop`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è‡ªåŠ©æ’æŸ¥æ¸…å•
- [ ] Node.jsç‰ˆæœ¬ >= 20.0.0
- [ ] ç«¯å£3000æœªè¢«å ç”¨
- [ ] é˜²ç«å¢™å…è®¸3000ç«¯å£
- [ ] äº‘æœåŠ¡å®‰å…¨ç»„å¼€æ”¾3000ç«¯å£
- [ ] distç›®å½•å­˜åœ¨ä¸”åŒ…å«æ–‡ä»¶
- [ ] PM2æœåŠ¡çŠ¶æ€ä¸ºonline

### æ—¥å¿—æŸ¥çœ‹
```bash
# åº”ç”¨æ—¥å¿—
pm2 logs huaxianpiying

# ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u pm2-root -f

# Nginxæ—¥å¿—ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
sudo tail -f /var/log/nginx/huaxianpiying_error.log
```

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

ğŸ­ **æ‚¨çš„çš®å½±æˆç½‘ç«™å·²æˆåŠŸé…ç½®ï¼**

**ä¸»è¦è®¿é—®åœ°å€**ï¼šhttp://1.95.41.96:3000

**ç®¡ç†å‘½ä»¤**ï¼š
- æŸ¥çœ‹çŠ¶æ€ï¼š`pm2 status`
- æŸ¥çœ‹æ—¥å¿—ï¼š`pm2 logs huaxianpiying`
- é‡å¯æœåŠ¡ï¼š`pm2 restart huaxianpiying`

---

*æœ€åæ›´æ–°ï¼š$(date)*
*æœåŠ¡å™¨IPï¼š1.95.41.96*
*åº”ç”¨ç«¯å£ï¼š3000*